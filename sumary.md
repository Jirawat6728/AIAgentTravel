# üìã ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏™‡∏£‡∏∏‡∏õ‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå AI Travel Agent

## üìå ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå

**AI Travel Agent** ‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ AI (Gemini LLM) ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ä‡πà‡∏ß‡∏¢‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÅ‡∏•‡∏∞‡∏à‡∏≠‡∏á‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß‡∏ö‡∏¥‡∏ô ‡πÇ‡∏£‡∏á‡πÅ‡∏£‡∏° ‡πÅ‡∏•‡∏∞‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏ô‡∏ó‡∏ô‡∏≤‡πÅ‡∏ö‡∏ö‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥

### ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô
- **‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå**: AI Travel Agent
- **‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô**: 2.1.0
- **‡∏™‡∏ñ‡∏≤‡∏õ‡∏±‡∏ï‡∏¢‡∏Å‡∏£‡∏£‡∏°**: Two-Pass ReAct Loop + Multi-Model Intelligence
- **Frontend**: React + Vite (‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢)
- **Backend**: FastAPI + Python
- **‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•**: MongoDB (‡∏´‡∏•‡∏±‡∏Å), Redis (‡πÄ‡∏™‡∏£‡∏¥‡∏°)
- **Intelligence**: Weighted Sum Model + RL + Data Normalization
- **‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤/‡∏à‡∏∏‡∏î‡∏´‡∏°‡∏≤‡∏¢**: ‡πÉ‡∏ä‡πâ‡∏ú‡πà‡∏≤‡∏ô AI Agent ‡πÉ‡∏ô‡πÅ‡∏ä‡∏ó (‡πÑ‡∏°‡πà‡∏°‡∏µ search bar / shortcut ‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏ö‡∏ô‡πÇ‡∏Æ‡∏°)

---

## üèóÔ∏è ‡∏™‡∏ñ‡∏≤‡∏õ‡∏±‡∏ï‡∏¢‡∏Å‡∏£‡∏£‡∏°‡∏£‡∏∞‡∏ö‡∏ö

### ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå

```
AITravelAgent/
‚îú‚îÄ‚îÄ frontend/                           # React Frontend (‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢)
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pages/         # ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å (home, chat, auth, profile, bookings, search, explore, settings)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/    # UI (AppHeader, HomeHeader, PlanChoiceCard*, TripSummaryUI, SlotCards, NotificationPanel)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config/        # firebase.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ utils/         # userDataManager, textCorrection
‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îÇ
‚îú‚îÄ‚îÄ backend/               # FastAPI Backend
‚îÇ   ‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api/          # chat, auth, travel, booking, notification, admin, mcp, monitoring, options_cache, amadeus_viewer, diagnostics
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ core/         # config, logging, exceptions, security, resilience, redis_cache
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ engine/       # Agent logic & Intelligence
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ agent.py                   # Main agent logic
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ workflow_manager.py        # SlotManager (segment access ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Amadeus)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ data_normalization.py     # Min-Max Normalization
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ reinforcement_learning.py # RL Expected Return
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ cost_tracker.py            # Cost tracking
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models/       # database, trip_plan, session, actions
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/     # travel_service, llm, email, sms, mcp_server, data_aggregator, options_cache, omise, ...
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ storage/      # mongodb_storage, hybrid_storage, redis_storage, connection_manager
‚îÇ   ‚îî‚îÄ‚îÄ main.py
‚îÇ
‚îî‚îÄ‚îÄ sumary.md              # ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏™‡∏£‡∏∏‡∏õ‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå (‡πÑ‡∏ü‡∏•‡πå‡∏ô‡∏µ‡πâ)
```

### ‡∏™‡∏ñ‡∏≤‡∏õ‡∏±‡∏ï‡∏¢‡∏Å‡∏£‡∏£‡∏° Backend

#### 1. **Two-Pass ReAct Loop**
- **Phase 1: Controller (Think & Act)**
  - ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
  - ‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Action ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
  - Execute actions ‡∏û‡∏£‡πâ‡∏≠‡∏° error handling
  - Loop ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 3 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏à‡∏ô‡∏Å‡∏ß‡πà‡∏≤‡∏à‡∏∞‡πÑ‡∏î‡πâ ASK_USER

- **Phase 2: Responder (Speak)**
  - ‡∏≠‡πà‡∏≤‡∏ô action_log
  - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢
  - ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß
  - ‡∏ñ‡∏≤‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡∏Ç‡∏≤‡∏î

#### 2. **Storage Layer**
- **MongoDB**: ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏•‡∏±‡∏Å (users, conversations, bookings)
- **Redis**: ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô workflow Amadeus ‚Äî ‡πÄ‡∏Å‡πá‡∏ö raw data ‡∏à‡∏≤‡∏Å Amadeus ‡∏ï‡πà‡∏≠ session, ‡πÄ‡∏Å‡πá‡∏ö‡∏ä‡πâ‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å (selections), ‡πÅ‡∏•‡∏∞‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ workflow; ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏à‡∏≠‡∏á‡πÄ‡∏™‡∏£‡πá‡∏à‡∏´‡∏£‡∏∑‡∏≠‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å flow
- **Repository Pattern**: ‡∏á‡πà‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏¢‡πâ‡∏≤‡∏¢‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•

#### 2.1 **Workflow (Redis) ‚Äî ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏ñ‡∏∂‡∏á‡∏à‡∏≠‡∏á**
- **‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô (steps)**: `planning` ‚Üí `searching` ‚Üí `selecting` ‚Üí `summary` ‚Üí `booking` ‚Üí `done`
- **‡πÄ‡∏Å‡πá‡∏ö raw data ‡∏à‡∏≤‡∏Å Amadeus ‡∏ó‡∏µ‡πà Redis**: ‡∏´‡∏•‡∏±‡∏á CALL_SEARCH ‡πÅ‡∏ï‡πà‡∏•‡∏∞ slot (‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß‡∏ö‡∏¥‡∏ô/‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å/‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á) ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å raw response ‡∏•‡∏á `amadeus_raw:session:{session_id}:{slot_name}:{segment_index}` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡∏à‡∏±‡∏î‡∏ä‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡∏∞‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏†‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á
- **‡∏à‡∏±‡∏î‡∏ä‡πâ‡∏≠‡∏¢‡∏î‡πâ‡∏ß‡∏¢‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Redis**: ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà normalize ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô options_cache; ‡πÉ‡∏ä‡πâ‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô **PlanChoiceCard** ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏≠‡∏±‡∏ô (flight / hotel / transfer) ‡∏ï‡∏≤‡∏° slot_intent
- **‡πÄ‡∏Å‡πá‡∏ö‡∏ä‡πâ‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ß‡πâ‡∏ó‡∏µ‡πà Redis**: ‡πÉ‡∏ä‡πâ `options_cache.save_selected_option()` ‡πÄ‡∏Å‡πá‡∏ö selection ‡∏ï‡πà‡∏≠ slot
- **‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å slot**: ‡πÅ‡∏™‡∏î‡∏á **Trip Summary** (current_plan) ‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï workflow step ‡πÄ‡∏õ‡πá‡∏ô `summary`
- **‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç**: ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Redis (raw ‡∏´‡∏£‡∏∑‡∏≠ cached options) ‡∏°‡∏≤‡∏à‡∏±‡∏î‡πÉ‡∏´‡∏°‡πà‡πÅ‡∏•‡∏∞‡πÅ‡∏™‡∏î‡∏á PlanChoiceCard ‡∏ï‡∏≤‡∏°‡πÄ‡∏î‡∏¥‡∏°
- **‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏£‡∏ö workflow ‡πÅ‡∏•‡∏∞‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Å‡∏î‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á**: ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å `POST /api/booking/create` ‚Üí ‡∏à‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤ **My Bookings**
- **‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏° workflow**: ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô Redis ‡∏ó‡∏µ‡πà `workflow:state:{session_id}` (step, slots_complete, updated_at)
- **‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå Redis ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô**: ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≠‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å `options_cache.clear_session_all(session_id)` ‡πÅ‡∏•‡∏∞ `workflow_state.clear_workflow(session_id)` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏ö options cache, raw Amadeus ‡πÅ‡∏•‡∏∞ workflow state ‡∏Ç‡∏≠‡∏á session ‡∏ô‡∏±‡πâ‡∏ô

#### 3. **Service Layer**
- **LLM Service**: Gemini AI integration
- **Travel Service (TravelOrchestrator)**: Flight, Hotel, Transfer, Activities, Popular Destinations, Rentals (‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å‡πÉ‡∏´‡πâ‡πÄ‡∏ä‡πà‡∏≤) ‚Äî ‡πÉ‡∏ä‡πâ **httpx** ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å Amadeus REST ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á (‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÑ‡∏ü‡∏•‡πå `amadeus_client.py` ‡πÅ‡∏•‡πâ‡∏ß)
- **‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ Amadeus**: ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô `backend/app/services/travel_service.py` ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‚Äî (1) OAuth2 token ‡∏ú‡πà‡∏≤‡∏ô `_get_amadeus_token()` POST ‡πÑ‡∏õ `{base}/v1/security/oauth2/token` (2) ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡πà‡∏≤‡∏ô `_amadeus_get(url, token, params)` ‡πÄ‡∏ä‡πà‡∏ô Flight `/v2/shopping/flight-offers`, Hotel `/v3/shopping/hotel-offers`, Transfer `/v1/shopping/transfer-offers`, Activities `/v1/shopping/activities`, Locations `/v1/reference-data/locations` (3) ‡πÉ‡∏ä‡πâ env `AMADEUS_SEARCH_API_KEY`/`AMADEUS_SEARCH_API_SECRET` ‡πÅ‡∏•‡∏∞ `AMADEUS_BOOKING_*` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏≠‡∏á (sandbox ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô)
- **Google Maps Client**: Geocoding, Places, Routes
- **MCP Server**: Model Context Protocol tools ‚Äî Amadeus + Google Maps + Weather (Open-Meteo): search_flights, search_hotels, search_transfers, search_activities, geocode, airport, get_weather_forecast
- **Memory Service**: User preferences ‡πÅ‡∏•‡∏∞ history
- **Email/SMS Service**: ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏≠‡∏µ‡πÄ‡∏°‡∏•, OTP ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£
- **Payment Service**: Omise integration

#### 4. **Intelligence Engine Layer**
- **OptionSelector**: Multi-model ensemble scoring (Weighted Sum + RL + ML + DL)
- **DataNormalizer**: Min-Max normalization ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö fair comparison
- **ReinforcementLearner**: Expected Return ‡πÅ‡∏•‡∏∞ Reward Function
- **EnhancedDataPreprocessor**: Outlier detection, missing imputation, feature engineering
- **OptionRankingModel**: Machine Learning (Random Forest, Gradient Boosting)
- **DeepRankingNetwork**: Deep Learning Neural Networks
- **SlotManager** (workflow_manager.py): ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ segment/slot ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Amadeus (flights, hotels, transfers) ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô

---

## üéØ ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏´‡∏•‡∏±‡∏Å

### 1. **‡∏Å‡∏≤‡∏£‡∏™‡∏ô‡∏ó‡∏ô‡∏≤‡∏Å‡∏±‡∏ö AI**
- ‡∏™‡∏ô‡∏ó‡∏ô‡∏≤‡πÅ‡∏ö‡∏ö‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢
- ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏ö‡∏£‡∏¥‡∏ö‡∏ó‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡∏ô‡∏ó‡∏ô‡∏≤
- ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
- ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏•‡∏∞‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡πÅ‡∏ú‡∏ô

### 2. **‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á**

#### ‚úàÔ∏è ‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß‡∏ö‡∏¥‡∏ô (Flights)
- ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß‡∏ö‡∏¥‡∏ô‡∏Ç‡∏≤‡πÑ‡∏õ-‡∏Ç‡∏≤‡∏Å‡∏•‡∏±‡∏ö
- ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö One-way ‡πÅ‡∏•‡∏∞ Round-trip
- ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏±‡πà‡∏á (Economy, Premium Economy, Business, First)
- ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ö‡∏¥‡∏ô‡∏ï‡∏£‡∏á (Direct/Non-stop)
- ‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß‡∏ö‡∏¥‡∏ô

#### üè® ‡πÇ‡∏£‡∏á‡πÅ‡∏£‡∏° (Hotels)
- ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÇ‡∏£‡∏á‡πÅ‡∏£‡∏°‡∏ï‡∏≤‡∏°‡∏à‡∏∏‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á
- ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÉ‡∏Å‡∏•‡πâ‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡πà‡∏≠‡∏á‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß
- ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ï‡∏≤‡∏°‡∏¢‡πà‡∏≤‡∏ô/‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà
- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏≤‡∏Ñ‡∏≤, ‡∏†‡∏≤‡∏û, ‡πÅ‡∏•‡∏∞‡∏£‡∏µ‡∏ß‡∏¥‡∏ß

#### üöó ‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á‡∏†‡∏≤‡∏Ñ‡∏û‡∏∑‡πâ‡∏ô‡∏î‡∏¥‡∏ô (Transfers)
- ‡∏£‡∏ñ‡∏£‡∏±‡∏ö‡∏™‡πà‡∏á‡∏™‡∏ô‡∏≤‡∏°‡∏ö‡∏¥‡∏ô
- ‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏°‡∏∑‡∏≠‡∏á
- ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏´‡∏•‡∏≤‡∏¢‡∏à‡∏∏‡∏î‡πÅ‡∏ß‡∏∞ (Waypoints)

#### üéØ ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏° (Activities)
- ‡∏ó‡∏±‡∏ß‡∏£‡πå‡πÅ‡∏•‡∏∞‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ó‡πà‡∏≠‡∏á‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß
- ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡πà‡∏≠‡∏á‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß

#### üè† ‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å‡πÉ‡∏´‡πâ‡πÄ‡∏ä‡πà‡∏≤ (Rentals)
- ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å‡πÉ‡∏´‡πâ‡πÄ‡∏ä‡πà‡∏≤ (‡πÉ‡∏ä‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Hotel API ‡πÅ‡∏¢‡∏Å label ‡πÄ‡∏õ‡πá‡∏ô rentals)

#### üìç ‡∏à‡∏∏‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏° (Popular Destinations)
- ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏∏‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏° (‡πÇ‡∏ã‡∏•, ‡πÇ‡∏ï‡πÄ‡∏Å‡∏µ‡∏¢‡∏ß, ‡πÄ‡∏Å‡∏≤‡∏∞‡∏™‡∏°‡∏∏‡∏¢ ‡∏Ø‡∏•‡∏Ø) ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ä‡πà‡∏ß‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏Ñ‡∏≤‡πÇ‡∏î‡∏¢‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì
- ‡πÉ‡∏ä‡πâ‡∏ú‡πà‡∏≤‡∏ô AI Agent ‡πÉ‡∏ô‡πÅ‡∏ä‡∏ó ‡∏´‡∏£‡∏∑‡∏≠ `GET /api/travel/popular-destinations`

### 3. **Frontend & Navigation**
- **HomePage**: ‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢, ‡πÑ‡∏°‡πà‡∏°‡∏µ search bar / category shortcuts / Popular Destinations (‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ä‡πâ‡∏ú‡πà‡∏≤‡∏ô‡πÅ‡∏ä‡∏ó‡∏Å‡∏±‡∏ö AI Agent)
- **AppHeader**: ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞ "‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô" + ‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô + ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ (‡∏•‡∏ö‡πÅ‡∏ó‡πá‡∏ö ‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á, ‡∏™‡∏≥‡∏£‡∏ß‡∏à, ‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß‡∏ö‡∏¥‡∏ô, ‡πÇ‡∏£‡∏á‡πÅ‡∏£‡∏°, ‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å‡πÉ‡∏´‡πâ‡πÄ‡∏ä‡πà‡∏≤ ‡∏≠‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß)
- **PlanChoiceCard**: ‡πÅ‡∏¢‡∏Å‡πÄ‡∏õ‡πá‡∏ô PlanChoiceCardFlights, PlanChoiceCardHotels, PlanChoiceCardTransfer + PlanChoiceCard ‡∏´‡∏•‡∏±‡∏Å

### 4. **‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á (Booking System)**
- ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
- ‡∏£‡∏∞‡∏ö‡∏ö‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏ú‡πà‡∏≤‡∏ô Omise
- ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
- ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á

### 5. **‡∏£‡∏∞‡∏ö‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ (User System)**
- ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô/‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
- Google Sign-In / Firebase Authentication
- ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏≠‡∏µ‡πÄ‡∏°‡∏• (‡∏™‡πà‡∏á‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô, ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÅ‡∏•‡πâ‡∏ß‡∏™‡πà‡∏á‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà; ‡∏¢‡∏Å‡πÄ‡∏ß‡πâ‡∏ô admin@example.com)
- ‡∏ï‡πâ‡∏≠‡∏á‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏Å‡πà‡∏≠‡∏ô‡∏à‡∏∂‡∏á‡∏à‡∏≠‡∏á‡πÑ‡∏î‡πâ (‡∏ñ‡πâ‡∏≤‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ)
- ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡πÅ‡∏•‡πâ‡∏ß‡∏™‡πà‡∏á OTP
- ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå
- ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á

### 6. **‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô (Notifications)**
- ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà
- ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
- ‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡πÜ

---

## üîß ‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ

### Frontend
- **React 18.3.1**: UI Framework
- **Vite 5.4.3**: Build tool
- **React Google Maps API**: ‡πÅ‡∏™‡∏î‡∏á‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà
- **Lottie React**: Animation
- **SweetAlert2**: Alert dialogs

### Backend
- **FastAPI 0.115.5**: Web framework
- **Uvicorn 0.30.6**: ASGI server
- **Pydantic 2.8.2**: Data validation
- **Motor 3.6.0**: MongoDB async driver
- **PyMongo 4.9**: MongoDB driver
- **Redis 7.1.0**: Caching layer
- **Google Generative AI 0.6.0+**: Gemini LLM
- **Amadeus 9.0.0**: Travel data API
- **Google Maps 4.10.0**: Location services
- **Omise 0.10.0**: Payment gateway
- **httpx 0.27.2**: Async HTTP client
- **Tenacity 9.0.0**: Retry logic
- **Passlib 1.7.4**: Password hashing
- **psutil 5.9.8**: System monitoring
- **Firebase Admin 6.5.0+**: Firebase Authentication
- **NumPy 1.24.0+**: Numerical computing
- **scikit-learn 1.3.0+**: Machine Learning algorithms
- **Pandas 2.0.0+**: Data manipulation and analysis
- **TensorFlow 2.13.0+**: Deep Learning framework

### Database
- **MongoDB**: ‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏•‡∏±‡∏Å
- **Redis**: Cache ‡πÅ‡∏•‡∏∞ session (optional)

---

## üì° API Endpoints

### Chat API (7 endpoints)
- `POST /api/chat` - ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏•‡∏∞‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö
- `POST /api/chat/stream` - Streaming chat responses (SSE)
- `GET /api/chat/history/{client_trip_id}` - ‡∏î‡∏∂‡∏á‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡∏ô‡∏ó‡∏ô‡∏≤
- `GET /api/chat/sessions` - ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ sessions ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
- `POST /api/chat/select_choice` - ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å (flight/hotel/etc.)
- `POST /api/chat/reset` - ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï chat session
- `POST /api/chat/tts` - Text-to-Speech

### Auth API (10+ endpoints)
- `POST /api/auth/register` - ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô
- `POST /api/auth/login` - ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
- `POST /api/auth/logout` - ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö
- `GET /api/auth/me` - ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
- `PUT /api/auth/profile` - ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå
- `POST /api/auth/google` - Google OAuth Sign-In
- `POST /api/auth/firebase` - Firebase Authentication
- `POST /api/auth/send-verification-email` - ‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô
- `POST /api/auth/verify-email` - ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏≠‡∏µ‡πÄ‡∏°‡∏• (token ‡∏à‡∏≤‡∏Å‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÉ‡∏ô‡∏≠‡∏µ‡πÄ‡∏°‡∏• ‡∏´‡∏£‡∏∑‡∏≠ query)
- `POST /api/auth/send-phone-otp` - ‡∏™‡πà‡∏á OTP ‡πÑ‡∏õ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£ (‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏ö‡∏≠‡∏£‡πå)
- `POST /api/auth/verify-phone-otp` - ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô OTP ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£
- `GET /api/auth/reset-password/{email}` - ‡∏Ç‡∏≠‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô
- `POST /api/auth/reset-password` - ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏î‡πâ‡∏ß‡∏¢ token
- `POST /api/auth/dev-login` - Dev login (testing only)

### Travel API (2 endpoints)
- `POST /api/travel/smart-search` - ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á (flights, hotels, rentals, transfers, activities, popular_destinations) ‡∏ï‡∏≤‡∏° intent ‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
- `GET /api/travel/popular-destinations` - ‡∏à‡∏∏‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏° (optional: lat, lng)

### Booking API (11 endpoints)
- `POST /api/booking/create` - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
- `GET /api/booking/list` - ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á (with Redis cache)
- `POST /api/booking/payment` - ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô
- `POST /api/booking/create-charge` - ‡∏™‡∏£‡πâ‡∏≤‡∏á Omise charge
- `GET /api/booking/payment-page/{booking_id}` - ‡∏´‡∏ô‡πâ‡∏≤‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô
- `GET /api/booking/payment-config` - ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• config ‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô
- `POST /api/booking/cancel` - ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
- `PUT /api/booking/update` - ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
- `PATCH /api/booking/update` - ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡πÅ‡∏ö‡∏ö partial
- `POST /api/booking/test-omise` - ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Omise connection
- `GET /api/booking/test-omise` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Omise status

#### ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Omise (Payment Gateway)
1. **‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Backend** ‚Äî ‡πÉ‡∏ô `backend/.env` ‡πÉ‡∏™‡πà‡∏Ñ‡∏µ‡∏¢‡πå‡∏à‡∏≤‡∏Å [Omise Dashboard](https://dashboard.omise.co/):
   - `OMISE_SECRET_KEY=skey_test_xxx` (‡∏´‡∏£‡∏∑‡∏≠ `skey_live_xxx` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö production)
   - `OMISE_PUBLIC_KEY=pkey_test_xxx` (‡∏´‡∏£‡∏∑‡∏≠ `pkey_live_xxx`)
   - (‡∏ñ‡πâ‡∏≤ deploy ‡πÅ‡∏¢‡∏Å) `FRONTEND_URL=https://your-frontend-domain.com` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ CORS ‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï origin ‡∏ô‡∏µ‡πâ
2. **Frontend** ‚Äî ‡πÉ‡∏ä‡πâ `VITE_API_BASE_URL` ‡∏ä‡∏µ‡πâ‡πÑ‡∏õ‡∏ó‡∏µ‡πà Backend (‡πÄ‡∏ä‡πà‡∏ô `http://localhost:8000`) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏µ‡∏¢‡∏Å `GET /api/booking/payment-config` ‡πÅ‡∏•‡∏∞ `POST /api/booking/create-charge`
3. **Flow ‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô**: ‡∏´‡∏ô‡πâ‡∏≤ Payment ‡πÇ‡∏´‡∏•‡∏î Omise.js ‡∏à‡∏≤‡∏Å CDN ‚Üí ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å Backend `payment-config` ‡πÄ‡∏≠‡∏≤ public key ‚Üí ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Å‡∏£‡∏≠‡∏Å‡∏ö‡∏±‡∏ï‡∏£ ‚Üí ‡∏™‡∏£‡πâ‡∏≤‡∏á token ‡∏î‡πâ‡∏ß‡∏¢ `Omise.createToken('card', card)` ‚Üí ‡∏™‡πà‡∏á token ‡πÑ‡∏õ Backend `create-charge` ‚Üí Backend ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å Omise API ‡∏™‡∏£‡πâ‡∏≤‡∏á charge
4. **‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠**:
   - `GET /api/booking/test-omise` ‚Äî ‡∏î‡∏π‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Ñ‡∏µ‡∏¢‡πå‡πÅ‡∏•‡∏∞‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Omise API
   - `POST /api/booking/test-omise` ‚Äî ‡∏™‡∏£‡πâ‡∏≤‡∏á test payment link (‡πÉ‡∏ä‡πâ‡∏ö‡∏±‡∏ï‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö ‡πÄ‡∏ä‡πà‡∏ô 4242424242424242)

### Admin API (5 endpoints)
- `GET /api/admin/status` - System status ‡πÅ‡∏•‡∏∞ health
- `GET /api/admin/sessions` - ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ sessions ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
- `GET /api/admin/logs` - System logs
- (‡∏•‡∏ö GET /api/admin/workflows ‡πÅ‡∏•‡πâ‡∏ß ‚Äî ‡πÉ‡∏ä‡πâ workflow tracking ‡∏ï‡∏≤‡∏° session ‡πÅ‡∏ó‡∏ô)
- `GET /api/admin/stream` - Server-Sent Events ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö realtime monitoring

### Monitoring API (8 endpoints)
- `GET /api/monitoring/health` - Health check
- `GET /api/monitoring/cost/session/{session_id}` - ‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢ per session
- `GET /api/monitoring/cost/all` - ‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
- `GET /api/monitoring/cost/breakdown/{session_id}` - ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢
- `POST /api/monitoring/cost/reset/{session_id}` - ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢
- `POST /api/monitoring/sync/redis/session/{session_id}` - Sync session ‡πÑ‡∏õ Redis
- `POST /api/monitoring/sync/redis/all` - Sync all sessions ‡πÑ‡∏õ Redis
- `GET /api/monitoring/sync/redis/status` - Redis sync status

### MCP API (10 endpoints)
- `GET /api/mcp/tools` - ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ tools ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
- `GET /api/mcp/health` - MCP health check
- `POST /api/mcp/execute` - Execute MCP tool
- `POST /api/mcp/search/flights` - ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß‡∏ö‡∏¥‡∏ô
- `POST /api/mcp/search/hotels` - ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÇ‡∏£‡∏á‡πÅ‡∏£‡∏°
- `POST /api/mcp/search/transfers` - ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á
- `POST /api/mcp/search/activities` - ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°
- `POST /api/mcp/geocode` - Geocoding
- `POST /api/mcp/airport` - ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏ô‡∏≤‡∏°‡∏ö‡∏¥‡∏ô
- Weather: ‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á‡∏ú‡πà‡∏≤‡∏ô MCP tool `get_weather_forecast` (Open-Meteo)

### Notification API (4 endpoints)
- `GET /api/notification/list` - ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
- `GET /api/notification/count` - ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏≠‡πà‡∏≤‡∏ô
- `POST /api/notification/mark-read` - ‡∏ó‡∏≥‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢‡∏ß‡πà‡∏≤‡∏≠‡πà‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß
- `POST /api/notification/mark-all-read` - ‡∏ó‡∏≥‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ß‡πà‡∏≤‡∏≠‡πà‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß

### Options Cache API (3 endpoints)
- `GET /api/options-cache/session/{session_id}` - ‡∏î‡∏∂‡∏á cached options
- `GET /api/options-cache/session/{session_id}/validate` - Validate cache
- `DELETE /api/options-cache/session/{session_id}` - ‡∏•‡∏ö cache

### Amadeus Viewer API (2 endpoints)
- `POST /api/amadeus-viewer/extract-info` - ‡πÅ‡∏¢‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Amadeus response
- `POST /api/amadeus-viewer/search` - ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ú‡πà‡∏≤‡∏ô Amadeus API

### Diagnostics API (2 endpoints)
- `GET /api/diagnostics/search-status` - ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
- `GET /api/diagnostics/test-search` - ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤

### ‡∏™‡∏£‡∏∏‡∏õ API Endpoints
**‡∏£‡∏ß‡∏°‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 65 endpoints** ‡∏à‡∏≤‡∏Å‡πÇ‡∏°‡∏î‡∏π‡∏• chat, auth, travel, booking, notification, admin, mcp, monitoring, options_cache, amadeus_viewer, diagnostics

---

## üß† AI Intelligence Features

### 1. **Smart Date Understanding**
- ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢: "‡∏û‡∏£‡∏∏‡πà‡∏á‡∏ô‡∏µ‡πâ", "‡∏™‡∏á‡∏Å‡∏£‡∏≤‡∏ô‡∏ï‡πå", "‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏´‡∏ô‡πâ‡∏≤"
- ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏õ‡∏µ‡∏û‡∏∏‡∏ó‡∏ò‡∏®‡∏±‡∏Å‡∏£‡∏≤‡∏ä: "20 ‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏° 2568"
- ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏à‡∏≤‡∏Å "3 ‡∏ß‡∏±‡∏ô", "2 ‡∏Ñ‡∏∑‡∏ô"

### 2. **Location Intelligence**
- ‡πÅ‡∏õ‡∏•‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏°‡∏∑‡∏≠‡∏á: "Siam Paragon" ‚Üí "Bangkok"
- ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÇ‡∏£‡∏á‡πÅ‡∏£‡∏°‡πÉ‡∏Å‡∏•‡πâ‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡πà‡∏≠‡∏á‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß
- ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏´‡∏•‡∏≤‡∏¢‡∏à‡∏∏‡∏î‡πÅ‡∏ß‡∏∞ (Waypoints)
- Google Maps integration ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö geocoding ‡πÅ‡∏•‡∏∞ routing

### 3. **Budget Advisory**
- ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏ó‡∏µ‡πà‡∏™‡∏°‡πÄ‡∏´‡∏ï‡∏∏‡∏™‡∏°‡∏ú‡∏•
- ‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏ï‡πà‡∏≥‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ
- ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ß‡∏°‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

### 4. **Flight Preferences**
- ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏ä‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏±‡πà‡∏á: "‡∏ä‡∏±‡πâ‡∏ô‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡∏û‡∏£‡∏µ‡πÄ‡∏°‡∏µ‡πà‡∏¢‡∏°", "business"
- ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß‡∏ö‡∏¥‡∏ô: "‡∏ö‡∏¥‡∏ô‡∏ï‡∏£‡∏á", "direct", "nonstop"
- ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÅ‡∏ö‡∏ö multi-city

### 5. **Advanced Option Selection Intelligence**

#### 5.1 **Weighted Sum Model (‡∏™‡∏°‡∏Å‡∏≤‡∏£ 1)**
- ‡∏™‡∏°‡∏Å‡∏≤‡∏£: `S_i = Œ£ (from j=1 to n) w_j * f_j(x_{ij})`
- ‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡∏´‡∏•‡∏≤‡∏¢‡∏õ‡∏±‡∏à‡∏à‡∏±‡∏¢‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô: Recommended (40%), Price (30%), Rating (20%), Convenience (5%), User Preferences (3%), Destination Type (1%), Time Constraints (1%)
- ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡πà‡∏≤ S_i ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏´‡∏•‡∏±‡∏Å

#### 5.2 **Data Normalization (Min-Max)**
- ‡∏™‡∏°‡∏Å‡∏≤‡∏£: `x_ij' = (x_ij - min(x_j)) / (max(x_j) - min(x_j))`
- Normalize ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô (‡∏ö‡∏≤‡∏ó, ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏µ‡∏ß‡∏¥‡∏ß, ‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á) ‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á [0, 1]
- Fair comparison across different criteria

#### 5.3 **Reinforcement Learning (RL)**
- Expected Return Formula: `Rt = E[ Œ£_{k=0}^{T-t} Œ≥^k r_{t+k+1} | S_t ]`
- Reward Function: ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å reward ‡∏à‡∏≤‡∏Å user interactions (select, book, reject, feedback)
- ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏à‡∏≤‡∏Å‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
- ‡πÄ‡∏û‡∏¥‡πà‡∏° RL bonus (0-10 points, 10% of total score)

#### 5.4 **Enhanced Data Preprocessing**
- **Outlier Detection**: IQR ‡πÅ‡∏•‡∏∞ Z-Score methods
- **Outlier Handling**: Clip, Remove, Median, Mean replacement
- **Missing Value Imputation**: Mean, Median, Mode strategies
- **Categorical Encoding**: Label ‡πÅ‡∏•‡∏∞ One-Hot encoding
- **Feature Engineering**: price_per_rating, price_per_hour, rating_per_review, engineered_total_score
- **Feature Standardization**: Z-score ‡πÅ‡∏•‡∏∞ Min-Max scaling

#### 5.5 **Machine Learning (ML)**
- **Option Ranking Model**: Random Forest / Gradient Boosting ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö ranking
- **Preference Predictor**: Gradient Boosting ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö user preferences
- **Price Predictor**: Linear Regression ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö price prediction
- ML bonus: 0-15 points (15% of total score)

#### 5.6 **Deep Learning (Neural Networks)**
- **Deep Ranking Network**: 
  - Architecture: 8 ‚Üí 64 ‚Üí 32 ‚Üí 16 ‚Üí 1 (ReLU + Dropout)
  - ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ pattern ‡∏ó‡∏µ‡πà‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô‡πÉ‡∏ô‡∏Å‡∏≤‡∏£ ranking
- **Deep Preference Network**:
  - Architecture: 10 ‚Üí 128 ‚Üí 64 ‚Üí 32 ‚Üí 1
  - ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ user preferences ‡πÅ‡∏ö‡∏ö multi-factor
- DL bonus: 0-15 points (15% of total score)

#### 5.7 **Multi-Model Ensemble Scoring**
- Final Score = Weighted Sum Score + RL Bonus + ML Bonus + DL Bonus
- Combined intelligence from multiple sources
- Adaptive learning over time

### 6. **Agent Modes**

#### Normal Mode (‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏≠‡∏á)
- ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏≠‡∏á
- ‡πÑ‡∏°‡πà auto-select
- ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏î‡∏à‡∏≠‡∏á‡πÄ‡∏≠‡∏á
- ‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å

#### Agent Mode (‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ 100%)
- AI ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ (‡πÉ‡∏ä‡πâ ML/DL + Weighted Sum + RL)
- Auto-book ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
- ‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏Ç‡∏≤‡∏î
- Detailed logging ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö debugging
- Race condition prevention
- Duplicate booking prevention
- Retry logic with exponential backoff

### 7. **Performance Optimizations**
- **Redis Caching**: Cache bookings list (TTL: 30s)
- **Query Timeout**: MongoDB queries ‡∏°‡∏µ timeout 5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
- **Concurrent Search**: ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ flights, hotels ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô
- **Connection Pooling**: ‡πÉ‡∏ä‡πâ connection manager ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö MongoDB ‡πÅ‡∏•‡∏∞ Redis

### 8. **Error Recovery**
- Auto-retry ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö external API calls
- Fallback mechanisms ‡πÄ‡∏°‡∏∑‡πà‡∏≠ service ‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß
- Graceful degradation (‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ‡πÅ‡∏°‡πâ Redis ‡πÑ‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°)
- Comprehensive error logging

### 9. **Intelligent Trip Planning**
- **Destination Type Detection**: ‡∏à‡∏≥‡πÅ‡∏ô‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏à‡∏∏‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á (beach, city, cultural, mountain)
- **Optimal Nights Suggestion**: ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏∑‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏à‡∏∏‡∏î‡∏´‡∏°‡∏≤‡∏¢
- **Smart Date Inference**: ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏à‡∏≤‡∏Å context
- **Logical Ordering**: ‡∏à‡∏±‡∏î‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏°‡∏µ‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏• (flights ‡∏Å‡πà‡∏≠‡∏ô transfers)

---

## üíæ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πá‡∏ö

### Backend (MongoDB)

#### Collections ‡∏´‡∏•‡∏±‡∏Å:
1. **users**: ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
2. **conversations**: ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡∏ô‡∏ó‡∏ô‡∏≤
3. **bookings**: ‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
4. **notifications**: ‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô

#### Conversation Structure:
```javascript
{
  "_id": ObjectId,
  "session_id": "user_id::chat_id",
  "user_id": "user_id",
  "created_at": ISODate,
  "updated_at": ISODate,
  "messages": [
    {
      "role": "user" | "assistant",
      "content": "‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°",
      "timestamp": ISODate,
      "metadata": {
        // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á UI (‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡∏à‡∏≤‡∏Å Redis + trip_plan)
        "current_plan": {...},
        "travel_slots": {...},
        "agent_state": {...}
      }
    }
  ]
}
```

### Backend (Redis) ‚Äî Workflow Amadeus

- **Raw data ‡∏à‡∏≤‡∏Å Amadeus** (`session:{session_id}:amadeus_raw`): ‡πÄ‡∏Å‡πá‡∏ö‡∏ú‡∏•‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ flights, hotels, transfers ‡∏ï‡πà‡∏≠ session ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏î‡∏ä‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡∏∞‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ã‡πâ‡∏≥‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏Å Amadeus ‡πÉ‡∏´‡∏°‡πà
- **‡∏ä‡πâ‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å** (`session:{session_id}:selections`): ‡πÄ‡∏Å‡πá‡∏ö flight/hotel/transfer ‡∏ó‡∏µ‡πà‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å ‡πÉ‡∏ä‡πâ‡πÅ‡∏™‡∏î‡∏á Trip Summary ‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á‡∏à‡∏≠‡∏á
- **‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ workflow** (‡πÉ‡∏ô key ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏¢‡∏Å): planning / selecting / summary / booking ‚Äî ‡πÉ‡∏ä‡πâ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå Redis ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏à‡∏≠‡∏á‡πÄ‡∏™‡∏£‡πá‡∏à

### Frontend (localStorage)

#### ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πá‡∏ö:
- `is_logged_in`: ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
- `user_data`: ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
- `ai_travel_trips_v1`: ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏£‡∏¥‡∏õ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏™‡∏ô‡∏ó‡∏ô‡∏≤
- `ai_travel_active_trip_id_v1`: ID ‡∏ó‡∏£‡∏¥‡∏õ‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
- `app_view`: ‡∏´‡∏ô‡πâ‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô

---

## üîÑ Workflow ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô (Amadeus + Redis + PlanChoiceCard)

‡∏´‡∏•‡∏±‡∏á‡∏•‡∏ö‡∏£‡∏∞‡∏ö‡∏ö workflow ‡πÄ‡∏î‡∏¥‡∏°‡πÅ‡∏•‡πâ‡∏ß ‡πÉ‡∏ä‡πâ workflow ‡πÉ‡∏´‡∏°‡πà‡∏î‡∏±‡∏á‡∏ô‡∏µ‡πâ: ‡πÄ‡∏Å‡πá‡∏ö raw data ‡∏à‡∏≤‡∏Å Amadeus ‡πÉ‡∏ô Redis ‚Üí Gemini Agent ‡∏à‡∏±‡∏î‡∏ä‡πâ‡∏≠‡∏¢ ‚Üí ‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô PlanChoiceCard ‚Üí ‡πÄ‡∏Å‡πá‡∏ö‡∏ä‡πâ‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏ô Redis ‚Üí ‡∏™‡∏£‡∏∏‡∏õ Trip Summary ‚Üí ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏à‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤ My Bookings ‚Üí ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå Redis ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏™‡∏£‡πá‡∏à

---

### 1. **‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏° Workflow**

```
User Input (‡πÅ‡∏ä‡∏ó)
    ‚Üì
Controller (Gemini) ‚Üí ‡∏™‡∏£‡πâ‡∏≤‡∏á/‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÅ‡∏ú‡∏ô (CREATE_ITINERARY / UPDATE_REQ)
    ‚Üì
CALL_SEARCH ‚Üí ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Amadeus (flights, hotels, transfers)
    ‚Üì
‡πÄ‡∏Å‡πá‡∏ö Raw Data ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô Redis (per session)
    ‚Üì
Gemini Agent ‡∏à‡∏±‡∏î‡∏ä‡πâ‡∏≠‡∏¢ (‡∏à‡∏±‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏á/‡∏à‡∏±‡∏î‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏à‡∏≤‡∏Å raw data)
    ‚Üì
‡∏™‡πà‡∏á‡∏ä‡πâ‡∏≠‡∏¢‡πÑ‡∏õ Frontend ‚Üí ‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô PlanChoiceCard ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏≠‡∏±‡∏ô (‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß‡∏ö‡∏¥‡∏ô / ‡πÇ‡∏£‡∏á‡πÅ‡∏£‡∏° / ‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á)
    ‚Üì
‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡πâ‡∏≠‡∏¢ ‚Üí ‡πÄ‡∏Å‡πá‡∏ö‡∏ä‡πâ‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏ô Redis
    ‚Üì
‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å slot ‚Üí ‡∏™‡∏£‡∏∏‡∏õ Trip Summary
    ‚Üì
‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç ‚Üí ‡πÄ‡∏≠‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô Redis ‡∏ó‡∏µ‡πà‡∏î‡∏∂‡∏á‡∏°‡∏≤‡πÅ‡∏•‡πâ‡∏ß‡∏°‡∏≤‡∏à‡∏±‡∏î‡πÉ‡∏´‡∏°‡πà (‡πÑ‡∏°‡πà‡∏î‡∏∂‡∏á Amadeus ‡∏ã‡πâ‡∏≥ ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô) ‚Üí ‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡πÄ‡∏î‡∏¥‡∏°
    ‚Üì
‡πÄ‡∏°‡∏∑‡πà‡∏≠ workflow ‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡∏∞‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Å‡∏î‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á ‚Üí ‡∏à‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤ My Bookings
    ‚Üì
‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô ‚Üí ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå Redis (raw data + selections ‡∏Ç‡∏≠‡∏á session ‡∏ô‡∏±‡πâ‡∏ô)
```

---

### 2. **Redis: ‡πÄ‡∏Å‡πá‡∏ö Raw Data ‡πÅ‡∏•‡∏∞‡∏ä‡πâ‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å**

| ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô Redis | ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö | ‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠ |
|----------------|--------|----------|
| **Raw data ‡∏à‡∏≤‡∏Å Amadeus** | ‡πÄ‡∏Å‡πá‡∏ö‡∏ú‡∏•‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ flights, hotels, transfers ‡∏ï‡πà‡∏≠ session (key ‡πÄ‡∏ä‡πà‡∏ô `session:{session_id}:amadeus_raw`) | ‡∏î‡∏∂‡∏á‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏ï‡πà‡∏≠ search ‚Üí ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏î‡∏ä‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡∏∞‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ã‡πâ‡∏≥‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏Å Amadeus ‡πÉ‡∏´‡∏°‡πà |
| **‡∏ä‡πâ‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å (selections)** | ‡πÄ‡∏Å‡πá‡∏ö flight/hotel/transfer ‡∏ó‡∏µ‡πà‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡πà‡∏≠ session (key ‡πÄ‡∏ä‡πà‡∏ô `session:{session_id}:selections`) | ‡πÅ‡∏™‡∏î‡∏á Trip Summary ‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠‡∏à‡∏≠‡∏á |
| **‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ workflow** | ‡πÄ‡∏Å‡πá‡∏ö step ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô (planning / selecting / summary / booking) | ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏° workflow ‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏´‡∏£‡πà‡πÅ‡∏™‡∏î‡∏á PlanChoiceCard / Summary / ‡∏õ‡∏∏‡πà‡∏°‡∏à‡∏≠‡∏á |

- **TTL**: ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ expiry ‡∏ï‡πà‡∏≠ session (‡πÄ‡∏ä‡πà‡∏ô 24 ‡∏ä‡∏°.) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ Redis ‡∏Ñ‡πâ‡∏≤‡∏á
- **‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå Redis**: ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏à‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤ My Bookings ‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß (‡∏´‡∏£‡∏∑‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å flow) ‚Üí ‡∏•‡∏ö key ‡∏Ç‡∏≠‡∏á session ‡∏ô‡∏±‡πâ‡∏ô (raw data + selections + workflow state)

---

### 3. **Gemini Agent ‡∏à‡∏±‡∏î‡∏ä‡πâ‡∏≠‡∏¢**

- ‡∏≠‡πà‡∏≤‡∏ô **raw data ‡∏à‡∏≤‡∏Å Redis** (‡∏ú‡∏• Amadeus ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ)
- ‡∏à‡∏±‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏á/‡∏à‡∏±‡∏î‡∏Å‡∏•‡∏∏‡πà‡∏°/‡∏à‡∏±‡∏î‡∏ä‡πâ‡∏≠‡∏¢ (ranking, filtering, ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥) ‡∏ï‡∏≤‡∏° context ‡∏Å‡∏≤‡∏£‡∏™‡∏ô‡∏ó‡∏ô‡∏≤‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
- ‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö **PlanChoiceCard**: ‡πÅ‡∏¢‡∏Å‡∏ï‡∏≤‡∏° category (flights, hotels, transfers) ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏≠‡∏±‡∏ô‡∏°‡∏µ list ‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å (id, title, price, details, raw_data ‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á)

---

### 4. **PlanChoiceCard ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏≠‡∏±‡∏ô**

- **PlanChoiceCardFlights**: ‡πÅ‡∏™‡∏î‡∏á‡∏ä‡πâ‡∏≠‡∏¢‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß‡∏ö‡∏¥‡∏ô‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà Agent ‡∏à‡∏±‡∏î‡πÅ‡∏•‡πâ‡∏ß
- **PlanChoiceCardHotels**: ‡πÅ‡∏™‡∏î‡∏á‡∏ä‡πâ‡∏≠‡∏¢‡πÇ‡∏£‡∏á‡πÅ‡∏£‡∏°‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà Agent ‡∏à‡∏±‡∏î‡πÅ‡∏•‡πâ‡∏ß
- **PlanChoiceCardTransfer**: ‡πÅ‡∏™‡∏î‡∏á‡∏ä‡πâ‡∏≠‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á/‡∏£‡∏ñ‡∏£‡∏±‡∏ö‡∏™‡πà‡∏á‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà Agent ‡∏à‡∏±‡∏î‡πÅ‡∏•‡πâ‡∏ß

‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å backend (‡∏ó‡∏µ‡πà‡∏î‡∏∂‡∏á‡∏à‡∏≤‡∏Å Redis + ‡∏à‡∏±‡∏î‡πÇ‡∏î‡∏¢ Gemini) ‡πÅ‡∏•‡∏∞‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Å‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏Å ‚Üí ‡∏™‡πà‡∏á choice ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô Redis (selections)

---

### 5. **‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏° Workflow**

- ‡πÄ‡∏Å‡πá‡∏ö **‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ workflow** ‡πÉ‡∏ô Redis (‡πÅ‡∏•‡∏∞/‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ô session/trip_plan ‡πÉ‡∏ô MongoDB) ‡πÄ‡∏ä‡πà‡∏ô:
  - `planning` ‚Äî ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á/‡πÅ‡∏Å‡πâ‡πÅ‡∏ú‡∏ô
  - `searching` ‚Äî ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ Amadeus
  - `selecting` ‚Äî ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÅ‡∏™‡∏î‡∏á PlanChoiceCard ‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
  - `summary` ‚Äî ‡∏Ñ‡∏£‡∏ö‡πÅ‡∏•‡πâ‡∏ß ‡πÅ‡∏™‡∏î‡∏á Trip Summary
  - `booking` ‚Äî ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏≠‡∏á / ‡∏à‡∏≠‡∏á‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß
- ‡πÉ‡∏ä‡πâ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ô‡∏µ‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠:
  - ‡πÅ‡∏™‡∏î‡∏á UI ‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô (PlanChoiceCard vs Summary vs ‡∏õ‡∏∏‡πà‡∏°‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏à‡∏≠‡∏á)
  - ‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏´‡∏£‡πà ‚Äú‡∏Ñ‡∏£‡∏ö‚Äù ‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏∂‡∏á‡πÅ‡∏™‡∏î‡∏á Summary ‡πÅ‡∏•‡∏∞‡πÄ‡∏õ‡∏¥‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏à‡∏≠‡∏á
  - ‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏´‡∏£‡πà‡∏à‡∏≠‡∏á‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß ‡∏à‡∏∂‡∏á **‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå Redis** ‡∏Ç‡∏≠‡∏á session ‡∏ô‡∏±‡πâ‡∏ô

---

### 6. **‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏ú‡∏ô**

- ‡∏ñ‡πâ‡∏≤‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ß‡∏±‡∏ô/‡∏à‡∏∏‡∏î‡∏´‡∏°‡∏≤‡∏¢/‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏ô ‡∏Ø‡∏•‡∏Ø):
  - ‡∏ñ‡πâ‡∏≤ **‡∏¢‡∏±‡∏á‡πÉ‡∏ä‡πâ‡∏ä‡∏∏‡∏î‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏î‡∏¥‡∏°‡πÑ‡∏î‡πâ** (‡πÄ‡∏ä‡πà‡∏ô ‡πÅ‡∏Ñ‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô choice) ‚Üí ‡πÉ‡∏ä‡πâ **raw data ‡πÉ‡∏ô Redis** ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà ‚Üí Gemini Agent ‡∏à‡∏±‡∏î‡∏ä‡πâ‡∏≠‡∏¢‡πÉ‡∏´‡∏°‡πà ‚Üí ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï PlanChoiceCard / Summary
  - ‡∏ñ‡πâ‡∏≤ **‡∏ï‡πâ‡∏≠‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÉ‡∏´‡∏°‡πà** (‡πÄ‡∏ä‡πà‡∏ô ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ß‡∏±‡∏ô‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á) ‚Üí CALL_SEARCH ‡πÉ‡∏´‡∏°‡πà ‚Üí ‡πÄ‡∏Å‡πá‡∏ö raw data ‡∏ä‡∏∏‡∏î‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏ô Redis ‚Üí ‡∏à‡∏±‡∏î‡∏ä‡πâ‡∏≠‡∏¢‡πÉ‡∏´‡∏°‡πà ‚Üí ‡πÅ‡∏™‡∏î‡∏á PlanChoiceCard ‡πÉ‡∏´‡∏°‡πà
- ‡∏ä‡πâ‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ (‡πÄ‡∏ä‡πà‡∏ô ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ) ‡∏¢‡∏±‡∏á‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡∏à‡∏≤‡∏Å Redis ‡πÑ‡∏î‡πâ

---

### 7. **‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏£‡∏ö workflow ‡πÅ‡∏•‡∏∞‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏à‡∏≠‡∏á**

1. ‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å slot (flight, hotel, transfer ‡∏ï‡∏≤‡∏°‡πÅ‡∏ú‡∏ô) ‚Üí ‡πÅ‡∏™‡∏î‡∏á **Trip Summary**
2. ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Å‡∏î **‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á** ‚Üí Backend ‡∏≠‡πà‡∏≤‡∏ô **selections ‡∏à‡∏≤‡∏Å Redis** (‡πÅ‡∏•‡∏∞ raw data ‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£) ‚Üí ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤ **My Bookings**
3. ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≠‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (‡πÅ‡∏•‡∏∞‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏ñ‡πâ‡∏≤‡∏°‡∏µ) ‚Üí **‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå Redis** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö session ‡∏ô‡∏±‡πâ‡∏ô:
   - ‡∏•‡∏ö raw data (`session:{session_id}:amadeus_raw`)
   - ‡∏•‡∏ö selections (`session:{session_id}:selections`)
   - ‡∏•‡∏ö/‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï workflow state ‡∏Ç‡∏≠‡∏á session ‡∏ô‡∏±‡πâ‡∏ô

---

### 8. **‡∏™‡∏£‡∏∏‡∏õ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏Å (‡∏™‡∏±‡πâ‡∏ô)**

1. **‡∏î‡∏∂‡∏á‡∏à‡∏≤‡∏Å Amadeus** ‚Üí ‡πÄ‡∏Å‡πá‡∏ö **raw data ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô Redis**
2. **Gemini Agent** ‚Üí ‡∏≠‡πà‡∏≤‡∏ô raw data ‡∏à‡∏≤‡∏Å Redis ‚Üí **‡∏à‡∏±‡∏î‡∏ä‡πâ‡∏≠‡∏¢** ‚Üí ‡∏™‡πà‡∏á‡πÑ‡∏õ‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô **PlanChoiceCard ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏≠‡∏±‡∏ô**
3. **‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å** ‚Üí ‡πÄ‡∏Å‡πá‡∏ö **‡∏ä‡πâ‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏ô Redis**
4. **‡∏Ñ‡∏£‡∏ö‡πÅ‡∏•‡πâ‡∏ß** ‚Üí ‡πÅ‡∏™‡∏î‡∏á **Trip Summary**
5. **‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç** ‚Üí ‡πÉ‡∏ä‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô Redis ‡∏à‡∏±‡∏î‡πÉ‡∏´‡∏°‡πà (‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡πâ‡∏ô‡πÉ‡∏´‡∏°‡πà‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô Redis ‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏±‡∏î‡πÉ‡∏´‡∏°‡πà)
6. **‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏à‡∏≠‡∏á** ‚Üí ‡∏à‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤ **My Bookings**
7. **‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏° workflow** ‡πÅ‡∏•‡∏∞‡πÄ‡∏°‡∏∑‡πà‡∏≠ **‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£** ‚Üí **‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå Redis** ‡∏Ç‡∏≠‡∏á session ‡∏ô‡∏±‡πâ‡∏ô

---

## üõ†Ô∏è ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏•‡∏∞‡∏£‡∏±‡∏ô

### Prerequisites
- Python 3.12+
- Node.js 18+
- MongoDB
- Redis (optional)

### Backend Setup

```bash
cd backend

# ‡∏™‡∏£‡πâ‡∏≤‡∏á virtual environment
python -m venv .venv
.venv\Scripts\activate  # Windows
# source .venv/bin/activate  # Linux/Mac

# ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á dependencies
pip install -r requirements.txt

# Note: ML/DL libraries (scikit-learn, pandas, tensorflow) ‡∏à‡∏∞‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
# ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö TensorFlow: ‡πÉ‡∏ä‡πâ CPU version (tensorflow) ‡∏´‡∏£‡∏∑‡∏≠ GPU version (tensorflow-gpu)

# ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå .env
cp env.example .env
# ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç .env ‡πÅ‡∏•‡∏∞‡πÉ‡∏™‡πà API keys

# ‡∏£‡∏±‡∏ô server
python main.py
# ‡∏´‡∏£‡∏∑‡∏≠
uvicorn main:app --host 0.0.0.0 --port 8000 --reload
```

### Frontend Setup

```bash
cd frontend

# ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á dependencies
npm install

# ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå .env
# VITE_API_BASE_URL=http://localhost:8000
# VITE_GOOGLE_CLIENT_ID=your_google_client_id

# ‡∏£‡∏±‡∏ô dev server
npm run dev
```

### Environment Variables

#### Backend (.env)
```env
# Gemini AI
GEMINI_API_KEY=your_key
GEMINI_MODEL_NAME=gemini-1.5-flash
ENABLE_GEMINI=true

# Amadeus
AMADEUS_API_KEY=your_key
AMADEUS_API_SECRET=your_secret

# Google Maps
GOOGLE_MAPS_API_KEY=your_key

# Google OAuth
GOOGLE_CLIENT_ID=your_google_client_id

# Firebase Authentication
FIREBASE_CREDENTIALS_PATH=/path/to/service-account-key.json
# OR
FIREBASE_PROJECT_ID=your-project-id
FIREBASE_API_KEY=your-api-key
FIREBASE_AUTH_DOMAIN=your-project.firebaseapp.com

# Database
MONGODB_URI=mongodb://localhost:27017
MONGODB_DB_NAME=travel_agent
REDIS_URL=redis://localhost:6379

# Payment
OMISE_PUBLIC_KEY=your_key
OMISE_SECRET_KEY=your_secret

# Security
SECRET_KEY=your_secret_key
ADMIN_EMAIL=admin@example.com
ADMIN_PASSWORD=your_admin_password
```

#### Frontend (.env)
```env
VITE_API_BASE_URL=http://localhost:8000
VITE_GOOGLE_CLIENT_ID=your_google_client_id

# Firebase Configuration (optional)
VITE_FIREBASE_ENABLED=true
VITE_FIREBASE_API_KEY=your-api-key
VITE_FIREBASE_AUTH_DOMAIN=your-project.firebaseapp.com
VITE_FIREBASE_PROJECT_ID=your-project-id
VITE_FIREBASE_STORAGE_BUCKET=your-project.appspot.com
VITE_FIREBASE_MESSAGING_SENDER_ID=your-sender-id
VITE_FIREBASE_APP_ID=your-app-id
```

---

## üîí Security Features

### 1. **Authentication & Authorization**
- Session-based authentication
- Google OAuth 2.0
- Password hashing (bcrypt)
- Session cookies with secure flags

### 2. **Rate Limiting**
- Chat API: 30 requests/minute
- Payment API: 10 requests/minute
- General API: 60 requests/minute

### 3. **Input Validation**
- Pydantic models ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö validation
- SQL injection protection
- XSS protection

### 4. **Error Handling**
- Global exception handlers
- Structured error responses
- ‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ú‡∏¢‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• sensitive ‡πÉ‡∏ô error messages

---

## üìä Monitoring & Logging

### Logging
- Structured logging
- Log levels: DEBUG, INFO, WARNING, ERROR
- Log files: `backend/data/logs/`

### Health Monitoring
- Health check endpoint: `/health`
- MongoDB connection monitoring
- Redis connection monitoring (optional)
- Auto-recovery mechanisms

### Metrics
- Request counts
- Error rates
- Response times
- LLM usage costs

---

## üß™ Testing

### Manual Testing
- Health check: `GET /health`
- Chat endpoint: `POST /api/chat`
- Authentication flow

### Test Scripts
- `backend/scripts/test_privacy_manual.py`
- `backend/scripts/verify_database.py`
- `backend/scripts/run_system_tests.py` - ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏ö‡∏ö backend ‡πÅ‡∏ö‡∏ö‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß (config, MCP tools, chat._map_option_for_frontend, agent_intelligence.validator, _normalize_create_itinerary_payload); ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏° MongoDB/Redis ‡∏à‡∏£‡∏¥‡∏á. ‡∏£‡∏±‡∏ô: `cd backend && .venv\Scripts\python scripts/run_system_tests.py`

---

## üìö ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°

### Backend Documentation
- `backend/docs/README.md` - ‡∏™‡∏ñ‡∏≤‡∏õ‡∏±‡∏ï‡∏¢‡∏Å‡∏£‡∏£‡∏°‡∏´‡∏•‡∏±‡∏Å
- `backend/docs/README_MCP.md` - MCP Integration
- `backend/docs/MCP_INTEGRATION.md` - MCP Guide
- `backend/docs/DATABASE_DESIGN.md` - Database Schema
- `backend/docs/AGENT_INTELLIGENCE.md` - AI Features
- `backend/docs/GOOGLE_MAPS_INTELLIGENCE.md` - Maps Features
- `backend/docs/LOCATION_SERVICE.md` - Location Service
- `backend/docs/AMADEUS_TRANSFER_SERVICE.md` - Transfer Service
- `backend/docs/AUTO_MODEL_SWITCHING.md` - Model Selection
- `backend/docs/CRASH_PREVENTION.md` - Error Handling

### Intelligence & ML/DL Documentation
- `WEIGHTED_SUM_MODEL_REPORT.md` - Weighted Sum Model implementation
- `RL_AND_NORMALIZATION_REPORT.md` - Reinforcement Learning & Data Normalization
- `ML_DL_PREPROCESSING_REPORT.md` - Machine Learning, Deep Learning & Preprocessing
- `FIREBASE_AUTHENTICATION_REPORT.md` - Firebase Authentication integration
- `CRUD_STABILITY_REPORT.md` - CRUD operations stability improvements
- `AGENT_MODE_STABILITY_REPORT.md` - Agent Mode stability enhancements
- `WORKFLOW_STABILITY_REPORT.md` - Workflow bug fixes
- `INTELLIGENT_PLANNING_REPORT.md` - Intelligent planning enhancements

### Frontend Documentation
- `CONVERSATION_HISTORY_DOCUMENTATION.md` - ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥

### Testing Documentation
- `testsprite_tests/testsprite-mcp-test-report.md` - Test report ‡∏û‡∏£‡πâ‡∏≠‡∏° analysis
- `testsprite_tests/tmp/code_summary.json` - Codebase summary

### Scripts
- `backend/scripts/mock_data.py` - Generate mock data for testing
  - Usage: `python -m scripts.mock_data <user_id> [num_sessions]`
- `backend/scripts/run_system_tests.py` - ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏ö‡∏ö backend (quick system tests)
  - Usage: `cd backend && .venv\Scripts\python scripts/run_system_tests.py`

---

## üöÄ Deployment

### Production Checklist
- [ ] ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ environment variables
- [ ] ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ MongoDB production
- [ ] ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Redis (optional)
- [ ] ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ SSL/TLS
- [ ] ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ CORS origins
- [ ] ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ rate limiting
- [ ] ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ logging
- [ ] ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ monitoring
- [ ] Backup strategy

### Docker (Optional)
- `backend/Dockerfile` - Backend container
- `backend/docker-compose.yml` - Full stack

---

## üêõ Troubleshooting

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏ö‡πà‡∏≠‡∏¢

1. **MongoDB Connection Failed**
   - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö MongoDB ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡∏±‡∏ô
   - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö MONGODB_URI ‡πÉ‡∏ô .env

2. **Gemini API Error**
   - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö GEMINI_API_KEY
   - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö quota ‡πÅ‡∏•‡∏∞ rate limits

3. **Amadeus API Error**
   - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö API keys
   - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö API quota

4. **CORS Error**
   - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö CORS origins ‡πÉ‡∏ô main.py
   - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö frontend URL

5. **Payment Error**
   - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Omise keys
   - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö test mode vs production mode

---

## üìù Changelog

### Version 2.1.0 (‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î)
- **Frontend**: ‡∏´‡∏ô‡πâ‡∏≤ HomePage ‡πÄ‡∏õ‡πá‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢; ‡∏•‡∏ö search bar, category shortcuts, Popular Destinations ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡πÇ‡∏Æ‡∏° (‡πÉ‡∏ä‡πâ‡∏ú‡πà‡∏≤‡∏ô AI Agent ‡πÉ‡∏ô‡πÅ‡∏ä‡∏ó)
- **AppHeader**: ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞ "‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô" (‡∏•‡∏ö‡πÅ‡∏ó‡πá‡∏ö ‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á, ‡∏™‡∏≥‡∏£‡∏ß‡∏à, ‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß‡∏ö‡∏¥‡∏ô, ‡πÇ‡∏£‡∏á‡πÅ‡∏£‡∏°, ‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å‡πÉ‡∏´‡πâ‡πÄ‡∏ä‡πà‡∏≤)
- **Travel API**: ‡πÄ‡∏û‡∏¥‡πà‡∏° `GET /api/travel/popular-destinations`; smart-search ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö rentals, popular_destinations
- **Auth**: ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏≠‡∏µ‡πÄ‡∏°‡∏• (‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô, ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏™‡πà‡∏á‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà); ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ó‡∏∏‡∏Å‡πÄ‡∏°‡∏• (‡∏¢‡∏Å‡πÄ‡∏ß‡πâ‡∏ô admin@example.com); ‡∏ï‡πâ‡∏≠‡∏á‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏Å‡πà‡∏≠‡∏ô‡∏à‡∏≠‡∏á (‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ); ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏™‡πà‡∏á OTP ‡πÅ‡∏•‡∏∞ verify-phone-otp ‚Äî implement ‡πÉ‡∏ô backend ‡πÅ‡∏•‡πâ‡∏ß (`auth.py`, `email_service`, `sms_service`)
- **Cleanup**: ‡∏•‡∏ö‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏ä‡πâ ‚Äî `frontend/src/App.css`, `backend/app/services/amadeus_client.py` (‡πÉ‡∏ä‡πâ TravelOrchestrator ‡πÉ‡∏ô travel_service ‡πÅ‡∏ó‡∏ô)
- **App.jsx**: ‡πÑ‡∏°‡πà‡∏™‡πà‡∏á nav callbacks (Flights/Hotels/Rentals) ‡πÑ‡∏õ‡∏ó‡∏µ‡πà HomePage

### Version 2.0.0
- Two-Pass ReAct Architecture
- MCP Integration
- MongoDB Storage
- Payment Integration
- Notification System
- Enhanced AI Intelligence

---

## üë• Contributors

- Development Team

---

## üìÑ License

(‡∏£‡∏∞‡∏ö‡∏∏ license ‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏Å‡∏≥‡∏´‡∏ô‡∏î)

---

## üìû Support

‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏´‡∏£‡∏∑‡∏≠‡∏õ‡∏±‡∏ç‡∏´‡∏≤:
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÉ‡∏ô `backend/docs/`
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö logs ‡πÉ‡∏ô `backend/data/logs/`
- Health check: `GET /health`

---

## üß™ Testing & Quality Assurance

### Backend Testing (TestSprite)
- **Test Coverage**: 10 test cases (63 endpoints ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î)
- **Pass Rate**: 30% (3/10 passed)
- **Test Areas**:
  - ‚úÖ Chat API reset
  - ‚úÖ User registration
  - ‚úÖ Booking creation
  - ‚ùå Authentication flows (requires test user setup)
  - ‚ùå Chat endpoints (timeout issues)

### Test Reports
- `testsprite_tests/testsprite-mcp-test-report.md` - Detailed test results
- `testsprite_tests/testsprite_backend_test_plan.json` - Test plan
- `testsprite_tests/standard_prd.json` - Product requirements

### Known Issues
1. **Authentication**: Tests need proper test user setup
2. **Timeouts**: AI-powered endpoints ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏≤‡∏ô (>30s)
3. **OAuth Testing**: ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ valid Google ID tokens

---

## üö® Recent Updates & Improvements

### Performance Enhancements (Jan 2026)
- ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° Redis caching ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö bookings list (TTL: 30s)
- ‚úÖ ‡∏•‡∏ö debug queries ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏≠‡∏Å
- ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° timeout protection ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö MongoDB queries (5s)
- ‚úÖ ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á error handling ‡πÉ‡∏ô frontend
- ‚úÖ AbortController ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö fetch requests (10s timeout)

### Admin Dashboard
- ‚úÖ Realtime monitoring ‡∏î‡πâ‡∏ß‡∏¢ Server-Sent Events (SSE)
- ‚úÖ Services status auto-sync ‡∏ó‡∏∏‡∏Å 1 ‡∏ô‡∏≤‡∏ó‡∏µ
- ‚úÖ Manual refresh ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏∑‡πà‡∏ô‡πÜ
- ‚úÖ Session debug viewer ‡∏û‡∏£‡πâ‡∏≠‡∏° raw data display
- ‚úÖ PlanChoiceCard preview ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö debugging

### Agent Mode Improvements
- ‚úÖ Detailed logging ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö auto-selection process
- ‚úÖ ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á booking payload structure
- ‚úÖ Error handling ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö booking API calls
- ‚úÖ Validation checks ‡∏Å‡πà‡∏≠‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á booking

### Mock Data Scripts
- ‚úÖ `backend/scripts/mock_data.py` - ‡∏™‡∏£‡πâ‡∏≤‡∏á test data
- ‚úÖ ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö pending_payment bookings
- ‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á realistic trip plans ‡∏û‡∏£‡πâ‡∏≠‡∏° options

### Backend System Tests (Jan 2026)
- ‚úÖ `backend/scripts/run_system_tests.py` - ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏ö‡∏ö backend ‡πÅ‡∏ö‡∏ö‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß (‡πÑ‡∏°‡πà‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏° MongoDB/Redis ‡∏à‡∏£‡∏¥‡∏á)
- ‚úÖ ‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏•‡∏∏‡∏°: app.core.config, MCP tools (14 tools: Amadeus + Google Maps + Weather), chat._map_option_for_frontend, agent_intelligence.validator, _normalize_create_itinerary_payload (guests clamp, end_date fix)
- ‚úÖ ‡∏£‡∏±‡∏ô‡∏ú‡πà‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (ALL PASSED)

---

**‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î**: ‡∏ï‡∏≤‡∏°‡∏™‡∏†‡∏≤‡∏û‡πÇ‡∏Ñ‡πâ‡∏î‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô ‚Äî Frontend ‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢; Nav ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ "‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô"; Travel API ‡∏°‡∏µ popular-destinations ‡πÅ‡∏•‡∏∞ smart-search (rentals, popular_destinations); Auth ‡∏°‡∏µ‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô, verify-email, ‡∏™‡πà‡∏á OTP ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£ ‡πÅ‡∏•‡∏∞ verify-phone-otp (implement ‡πÉ‡∏ô backend ‡πÅ‡∏•‡πâ‡∏ß); ‡∏•‡∏ö‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ (App.css, amadeus_client.py). MCP ‡∏°‡∏µ Weather (Open-Meteo) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á. Backend system tests: `run_system_tests.py` ‡∏ú‡πà‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (config, MCP 14 tools, chat, agent validator, normalize payload).
